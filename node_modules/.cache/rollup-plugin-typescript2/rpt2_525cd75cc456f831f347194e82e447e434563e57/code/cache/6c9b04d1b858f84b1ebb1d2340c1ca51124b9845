{"code":"import { sendRequest } from \"@/colony/dpt_comunication\";\r\nexport function getfirstSpawnName(roomName) {\r\n    return Memory['colony'][roomName]['creepSpawning']['spawn'][0];\r\n}\r\nconst roles = {\r\n    queen: (data) => ({\r\n        source: creep => {\r\n            if (creep.ticksToLive < 200 &&\r\n                creep.memory['task'] == null &&\r\n                Game.rooms[creep.memory['roomName']].energyAvailable >= 300) {\r\n                //CREEP RENEW PROCESS\r\n                if (!creep.memory['renewing']) {\r\n                    creep.memory['renewing'] = true;\r\n                }\r\n                const spawnName = getfirstSpawnName(creep.memory['roomName']);\r\n                const spawn = Game.spawns[spawnName];\r\n                if (!creep.pos.isNearTo(spawn.pos))\r\n                    creep.moveTo(spawn);\r\n                else\r\n                    return true;\r\n                //else creep.say('♻️');\r\n            }\r\n            else {\r\n                //\r\n                return (roles['transporter']({}).source(creep));\r\n            }\r\n            return true;\r\n        },\r\n        target: creep => {\r\n            if (creep.ticksToLive < 200 &&\r\n                creep.memory['task'] == null &&\r\n                Game.rooms[creep.memory['roomName']].energyAvailable >= 300) {\r\n                if (creep.memory['renew'])\r\n                    return false;\r\n                else\r\n                    return true;\r\n            }\r\n            else {\r\n                return (roles['transporter']({}).target(creep));\r\n            }\r\n            return false;\r\n        }\r\n    }),\r\n    manager: (data) => ({\r\n        source: creep => {\r\n            return true;\r\n        },\r\n        target: creep => {\r\n            return false;\r\n        }\r\n    }),\r\n    transporter: (data) => ({\r\n        source: creep => {\r\n            /*\r\n            const sourceData = creep.memory['task']['source'];\r\n            let move = 'MOVE';\r\n            if (sourceData) return transferTaskOperations[move].source(creep)\r\n            else {\r\n                creep.say('💤')\r\n                return true;\r\n            }\r\n            */\r\n            creep.say('zz');\r\n            return false;\r\n            if (creep.memory['task'] = null) {\r\n                if (creep.memory['sleeping']) {\r\n                    creep.say('💤');\r\n                    return false;\r\n                }\r\n                else\r\n                    return true; //change to target to getTask\r\n            }\r\n            else {\r\n                if (creep.memory['sleeping'])\r\n                    creep.memory['sleeping'] = false;\r\n                //WORKING CODE\r\n                const taskType = creep.memory['task']['type'];\r\n                return transferTaskOperations[taskType].source(creep);\r\n            }\r\n        },\r\n        target: creep => {\r\n            if (creep.memory['task'] = null) {\r\n                sendRequest(creep.memory['roomName'], creep.memory['department'], creep.name);\r\n                creep.memory['sleeping'] = true;\r\n                return true;\r\n            }\r\n            else {\r\n                //WORKING CODE\r\n                const taskType = creep.memory['task']['type'];\r\n                return transferTaskOperations[taskType].source(creep);\r\n            }\r\n            return false;\r\n        }\r\n    })\r\n};\r\nexport const transferTaskOperations = {\r\n    MOVE: {\r\n        source: (creep) => {\r\n            creep.say('💤');\r\n            return false;\r\n            /*\r\n            const sourceData = creep.memory['task']['source'];\r\n            const targetPos:RoomPosition = new RoomPosition(sourceData['pos'][0], sourceData['pos'][1], sourceData['roomName'])\r\n            creep.moveTo(targetPos)\r\n            if (creep.pos.isNearTo(targetPos)) {\r\n                return true;\r\n            }\r\n            return false;\r\n            */\r\n        },\r\n        target: (creep) => {\r\n            const targetData = creep.memory['task']['target'];\r\n            const target = Game.getObjectById(targetData['id']);\r\n            if (target) {\r\n            }\r\n            return false;\r\n        }\r\n    },\r\n    TRANSFER: {\r\n        source: (creep) => {\r\n            return false;\r\n        },\r\n        target: (creep) => {\r\n            return false;\r\n        }\r\n    },\r\n    WITHDRAW: {\r\n        source: (creep) => {\r\n            return false;\r\n        },\r\n        target: (creep) => {\r\n            return false;\r\n        }\r\n    }\r\n};\r\nexport default roles;\r\n//# sourceMappingURL=advanced.js.map","references":["C:/Users/heche/AppData/Local/Screeps/scripts/127_0_0_1___21025/Winsnow/src/colony/dpt_comunication.ts"],"map":"{\"version\":3,\"file\":\"advanced.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../src/creep/role/advanced.ts\"],\"names\":[],\"mappings\":\"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\"}"}
